class c{constructor(){console.log("[CICDGenerator] Initialized")}generatePipeline(e){switch(console.log(`[CICDGenerator] Generating ${e.platform} pipeline for ${e.projectType}`),e.platform){case"github-actions":return this.generateGitHubActions(e);case"gitlab-ci":return this.generateGitLabCI(e);case"azure-devops":return this.generateAzureDevOps(e);case"jenkins":return this.generateJenkins(e);case"circleci":return this.generateCircleCI(e);case"bitbucket-pipelines":return this.generateBitbucket(e);default:throw new Error(`Unsupported platform: ${e.platform}`)}}generateFromTemplate(e,t,n){const a=this.getTemplate(t),s={platform:e,projectType:t,projectName:n?.projectName||"my-project",branches:{main:"main",develop:"develop",...n?.branches||{}},stages:n?.stages||a.stages,environment:{variables:n?.environment?.variables||{},secrets:n?.environment?.secrets||a.secrets},...n};return this.generatePipeline(s)}generateGitHubActions(e){const t={name:`${e.projectName} CI/CD`,on:{push:{branches:[e.branches.main]},pull_request:{branches:[e.branches.main]}},env:e.environment.variables,jobs:{}};for(const a of e.stages)for(const s of a.jobs){const i=this.sanitizeJobName(s.name);t.jobs[i]={"runs-on":"ubuntu-latest",steps:[{name:"Checkout code",uses:"actions/checkout@v3"},...this.convertStepsToGitHub(s.steps,e)]},s.timeout&&(t.jobs[i]["timeout-minutes"]=Math.ceil(s.timeout/6e4))}return{platform:"github-actions",fileName:".github/workflows/ci.yml",content:`# Auto-generated GitHub Actions workflow
# Generated by Gemini IDE CI/CD Pipeline Generator

${this.yamlStringify(t)}
`,documentation:this.generateGitHubActionsDocs(e)}}generateGitLabCI(e){const t={image:this.getDockerImage(e.projectType),stages:e.stages.map(a=>a.name),variables:e.environment.variables};e.caching&&(t.cache={paths:e.caching.paths});for(const a of e.stages)for(const s of a.jobs){const i=this.sanitizeJobName(s.name);t[i]={stage:a.name,script:s.steps.filter(r=>r.type==="run"||r.type==="script").map(r=>r.command)},s.environment&&(t[i].environment={name:s.environment})}return{platform:"gitlab-ci",fileName:".gitlab-ci.yml",content:`# Auto-generated GitLab CI pipeline
# Generated by Gemini IDE CI/CD Pipeline Generator

${this.yamlStringify(t)}
`,documentation:this.generateGitLabCIDocs(e)}}generateAzureDevOps(e){const t={trigger:{branches:{include:[e.branches.main]}},pool:{vmImage:"ubuntu-latest"},variables:e.environment.variables,stages:e.stages.map(a=>({stage:a.name,jobs:a.jobs.map(s=>({job:this.sanitizeJobName(s.name),steps:[...s.steps.map(i=>({script:i.command,displayName:i.name}))]}))}))};return{platform:"azure-devops",fileName:"azure-pipelines.yml",content:`# Auto-generated Azure DevOps pipeline
# Generated by Gemini IDE CI/CD Pipeline Generator

${this.yamlStringify(t)}
`,documentation:this.generateAzureDevOpsDocs(e)}}generateJenkins(e){const t=e.stages.map(a=>{const s=a.jobs.flatMap(i=>i.steps.map(r=>`                    sh '${r.command}'`)).join(`
`);return`        stage('${a.name}') {
            steps {
${s}
            }
        }`}).join(`
`);return{platform:"jenkins",fileName:"Jenkinsfile",content:`// Auto-generated Jenkinsfile
// Generated by Gemini IDE CI/CD Pipeline Generator

pipeline {
    agent any
    
    environment {
${Object.entries(e.environment.variables).map(([a,s])=>`        ${a} = '${s}'`).join(`
`)}
    }
    
    stages {
${t}
    }
    
    post {
        success {
            echo 'Pipeline succeeded!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }
}
`,documentation:this.generateJenkinsDocs(e)}}generateCircleCI(e){const t={};for(const s of e.stages)for(const i of s.jobs){const r=this.sanitizeJobName(i.name);t[r]={docker:[{image:this.getDockerImage(e.projectType)}],steps:["checkout",...i.steps.map(m=>({run:{name:m.name,command:m.command}}))]}}const n={version:2.1,jobs:t,workflows:{version:2,"build-and-deploy":{jobs:Object.keys(t)}}};return{platform:"circleci",fileName:".circleci/config.yml",content:`# Auto-generated CircleCI config
# Generated by Gemini IDE CI/CD Pipeline Generator

${this.yamlStringify(n)}
`,documentation:this.generateCircleCIDocs(e)}}generateBitbucket(e){const t={image:this.getDockerImage(e.projectType),pipelines:{branches:{[e.branches.main]:e.stages.map(a=>({step:{name:a.name,script:a.jobs.flatMap(s=>s.steps.map(i=>i.command))}}))}}};return{platform:"bitbucket-pipelines",fileName:"bitbucket-pipelines.yml",content:`# Auto-generated Bitbucket Pipelines
# Generated by Gemini IDE CI/CD Pipeline Generator

${this.yamlStringify(t)}
`,documentation:this.generateBitbucketDocs(e)}}getTemplate(e){return{nodejs:{stages:[{name:"build",jobs:[{name:"build",steps:[{name:"Install dependencies",type:"run",command:"npm ci"},{name:"Build",type:"run",command:"npm run build"}]}]},{name:"test",jobs:[{name:"test",steps:[{name:"Run tests",type:"run",command:"npm test"},{name:"Coverage",type:"run",command:"npm run coverage"}]}]},{name:"deploy",jobs:[{name:"deploy",steps:[{name:"Deploy",type:"deploy",command:"npm run deploy"}],environment:"production"}]}],secrets:["NPM_TOKEN","DEPLOY_KEY"]},python:{stages:[{name:"build",jobs:[{name:"build",steps:[{name:"Install dependencies",type:"run",command:"pip install -r requirements.txt"},{name:"Build",type:"run",command:"python setup.py build"}]}]},{name:"test",jobs:[{name:"test",steps:[{name:"Run tests",type:"run",command:"pytest"},{name:"Lint",type:"run",command:"flake8"}]}]}],secrets:["PYPI_TOKEN"]},docker:{stages:[{name:"build",jobs:[{name:"build",steps:[{name:"Build Docker image",type:"run",command:"docker build -t myapp ."},{name:"Push to registry",type:"run",command:"docker push myapp"}]}]}],secrets:["DOCKER_USERNAME","DOCKER_PASSWORD"]},java:{stages:[],secrets:[]},dotnet:{stages:[],secrets:[]},go:{stages:[],secrets:[]},rust:{stages:[],secrets:[]},"static-site":{stages:[],secrets:[]}}[e]||{stages:[],secrets:[]}}convertStepsToGitHub(e,t){return e.map(n=>n.type==="action"&&n.action?{name:n.name,uses:n.action,with:n.with}:{name:n.name,run:n.command,env:n.env})}getDockerImage(e){return{nodejs:"node:18",python:"python:3.11",java:"openjdk:17",dotnet:"mcr.microsoft.com/dotnet/sdk:7.0",go:"golang:1.21",rust:"rust:latest",docker:"docker:latest","static-site":"nginx:alpine"}[e]||"ubuntu:latest"}sanitizeJobName(e){return e.toLowerCase().replace(/[^a-z0-9-]/g,"-")}yamlStringify(e){return JSON.stringify(e,null,2).replace(/"/g,"").replace(/,\n/g,`
`)}generateGitHubActionsDocs(e){return`# GitHub Actions CI/CD Pipeline

## Setup Instructions

1. Copy this file to \`.github/workflows/ci.yml\`
2. Configure secrets in repository settings:
${e.environment.secrets.map(t=>`   - ${t}`).join(`
`)}

## Stages
${e.stages.map(t=>`- ${t.name}`).join(`
`)}

## Triggers
- Push to ${e.branches.main}
- Pull requests to ${e.branches.main}
`}generateGitLabCIDocs(e){return`# GitLab CI/CD Pipeline

## Setup Instructions

1. Copy this file to \`.gitlab-ci.yml\`
2. Configure CI/CD variables in project settings

## Stages
${e.stages.map(t=>`- ${t.name}`).join(`
`)}
`}generateAzureDevOpsDocs(e){return`# Azure DevOps Pipeline

## Setup Instructions

1. Copy this file to \`azure-pipelines.yml\`
2. Create new pipeline in Azure DevOps
3. Configure pipeline variables

## Stages
${e.stages.map(t=>`- ${t.name}`).join(`
`)}
`}generateJenkinsDocs(e){return`# Jenkins Pipeline

## Setup Instructions

1. Copy this file to \`Jenkinsfile\`
2. Create new pipeline job in Jenkins
3. Configure credentials

## Stages
${e.stages.map(t=>`- ${t.name}`).join(`
`)}
`}generateCircleCIDocs(e){return`# CircleCI Pipeline

## Setup Instructions

1. Copy this file to \`.circleci/config.yml\`
2. Enable project in CircleCI
3. Configure environment variables

## Jobs
${e.stages.flatMap(t=>t.jobs.map(n=>`- ${n.name}`)).join(`
`)}
`}generateBitbucketDocs(e){return`# Bitbucket Pipelines

## Setup Instructions

1. Copy this file to \`bitbucket-pipelines.yml\`
2. Enable pipelines in repository settings
3. Configure repository variables

## Stages
${e.stages.map(t=>`- ${t.name}`).join(`
`)}
`}}let o=null;function l(){return o||(o=new c),o}export{c as CICDPipelineGenerator,l as getCICDGenerator};
//# sourceMappingURL=CICDPipelineGenerator-Bbdhw1Nd.js.map
